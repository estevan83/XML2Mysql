<?php
/**
 * USATO PER I TEST
 * Genera il file xml 'prova.xml' in questo formato:
 <root>
    <sez1>
        <campo1>valore</campo1>
        <campo2>valore</campo2>
        <campoN>valore</campoN>
    </sez1>    
    <sez2>
        <campo1>valore</campo1>
        <campo2>valore</campo2>
        <campoN>valore</campoN>
    </sez2>    
    <sezN>
        <campo1>valore</campo1>
        <campo2>valore</campo2>
        <campoN>valore</campoN>
    </sezN>    
</root>
*/


$arrayXml = array (
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
        array (
                'nome' => 'paolo',
                'cognome' => 'palamini',
        ),
        array (
                'nome' => 'mario',
                'cognome' => 'rossi',
        ),
        array (
                'nome' => 'perosna',
                'cognome' => 'ciaoeo',
        ),
        array (
                'nome' => 'erty',
                'cognome' => 'fdsfdb',
        ),
);


generateXML($arrayXml);




function generateXML($array, $title = 'root', $secondary_branch = 'person' ,$file_name = 'prova.xml') { 

    // creo documento xml
    $xmlDoc = new DOMDocument(); 
    
    // radice principale (default Root)
    $root = $xmlDoc -> appendChild($xmlDoc ->createElement($title)); 
    
    // aggiungo i campi
    foreach($array as $element){
        
        if (!empty($element)) { 
            $secondary = $root -> appendChild($xmlDoc ->createElement($secondary_branch)); 
            
            foreach($element as $key => $val) { 
                $secondary -> appendChild($xmlDoc ->createElement($key, $val)); 
            } 
        } 
    }
    
    header("Content-Type: text/plain"); 
   
    // Make the output 
    $xmlDoc -> formatOutput = true; 
   
      
    $xmlDoc -> save($file_name); 
   
    // Return xml file name 
    return $file_name; 
} 
